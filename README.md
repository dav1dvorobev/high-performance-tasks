# Программные средства высокопроизводительных компьютерных систем

Все задачи реализованы на языке программирования Rust. В качестве полной альтернативы технологии `OpenMP` использован крейт [`rayon`](https://crates.io/crates/rayon), который предоставляет аналогичный по концепции интерфейс параллельных итераторов, но при этом полностью реализован на Rust и соответствует его принципам безопасности.\
Каждая задача оформлена в виде отдельного бинарного модуля. Имена файлов отражают суть задачи и применяемую технологию (`MPI`, `OpenCL`, `Rayon`).

```bash
src/bin/
├── hello_mpi.rs # Пример с использованием MPI
├── hello_opencl.rs # Пример с использованием OpenCl
├── hello_rayon.rs # Пример с использованием Rayon(OpenMP)
└── ...
```

# Cборка и запуск
## MPI
Убедитесь, что установлена реализация `MPI` (например, `OpenMPI` или `MPICH`).
```bash
cargo build --release --bin hello_mpi
mpirun target/release/hello_mpi
```
## OpenCL
Убедитесь, что установлены драйверы `OpenCL` и доступна реализация платформы (например, `AMDGPU`, `Intel`, или `POCL`).
```bash
cargo run --release --bin hello_opencl
```
## Rayon(OpenMP)
```bash
cargo run --release --bin hello_rayon
```

# Сравнение производительности

## Сумма массива

Посчитать сумму массива чисел. Показать зависимость времени работы программы от количества чисел в массиве (`10`, `1000`, `10_000_000`).

| Размер     | Rayon(OpenMP) | MPI       | OpenCL    |
|------------|:-------------:|:---------:|:---------:|
| 10         | 0.0006476     | 0.0000098 | 0.0000473 |
| 1000       | 0.0015611     | 0.0000139 | 0.0001835 |
| 10_000_000 | 0.0020470     | 0.0072292 | 0.0043289 |



## Производная функции

Посчитать производную функции от двух переменных, заданной на сетке. Другими словами: дан двумерный массив, каждый элемент которого `A[i][j] = f(i, j)`; построить массив `B[i][j] = df(i, j)/dx` или `df(i, j)/dy`. Функция `f(x, y)` произвольная, но не тривиальная. Показать зависимость времени работы от размера входных данных.

| Размер | Rayon(OpenMP) | MPI | OpenCL |
|--------|:-------------:|-----|:------:|
| 10     | 0.0015102     | N/A | N/A    |
| 100    | 0.0009884     | N/A | N/A    |
| 1000   | 0.0205092     | N/A | N/A    |


## Произведение матриц

Посчитать произведение двух матриц. Показать зависимость времени работы от размера входных данных.

| Размер | Rayon(OpenMP) | MPI | OpenCL |
|--------|:-------------:|-----|:------:|
| 10     | 0.0004481     | N/A | N/A    |
| 100    | 0.0010548     | N/A | N/A    |
| 1000   | 0.4192018     | N/A | N/A    |

# Система

```bash
OS: Arch Linux on Windows 10 x86_64
Kernel: 6.6.87.2-microsoft-standard-WSL2
CPU: AMD Ryzen 5 5500U with Radeon Graphics (12) @ 2.096GHz
GPU: AMD Radeon Graphics (Vega 7)
Memory: 921MiB / 15599MiB
```